jQuery(document).ready(function(e){function s(e){for(var s="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=t.length,p=0;p<e;p++)s+=t.charAt(Math.floor(Math.random()*i));return s}function t(s){const t=".box-schema-item[data-key='"+s+"'] .seopress_rich_snippets_articles_counters";e(t).after('<div class="seopress_rich_snippets_articles_counters_val">/ 110</div>'),0!=e(t).length&&(e(t).text(e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_article_title_meta").val().length),e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_article_title_meta").val().length>110&&e(t).css("color","red"),e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_article_title_meta").keyup(function(i){e(t).css("color","inherit"),e(this).val().length>110&&e(t).css("color","red"),e(t).text(e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_article_title_meta").val().length),e(this).val().length>0?(e(".snippet-title-custom").text(i.target.value),e(".snippet-title").css("display","none"),e(".snippet-title-custom").css("display","block"),e(".snippet-title-default").css("display","none")):0==e(this).val().length&&(e(".snippet-title-default").css("display","block"),e(".snippet-title-custom").css("display","none"),e(".snippet-title").css("display","none"))}))}function i(s){const t=".box-schema-item[data-key='"+s+"'] .seopress_rich_snippets_courses_counters";e(t).after('<div id="seopress_rich_snippets_courses_counters_val">/ 60</div>'),0!=e(t).length&&(e(t).text(e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_courses_desc").val().length),e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_courses_desc").val().length>60&&e(t).css("color","red"),e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_courses_desc").keyup(function(i){e(t).css("color","inherit"),e(this).val().length>60&&e(t).css("color","red"),e(t).text(e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_courses_desc").val().length),e(this).val().length>0?(e(".snippet-title-custom").text(i.target.value),e(".snippet-title").css("display","none"),e(".snippet-title-custom").css("display","block"),e(".snippet-title-default").css("display","none")):0==e(this).val().length&&(e(".snippet-title-default").css("display","block"),e(".snippet-title-custom").css("display","none"),e(".snippet-title").css("display","none"))}))}function p(){e(".seopress-date-picker").datepicker({dateFormat:"yy-mm-dd",beforeShow:function(s,t){e("#ui-datepicker-div").removeClass("ui-date-picker").addClass("seopress-ui-datepicker")}})}function a(s){const t=".box-schema-item[data-key='"+s+"'] .seopress_media_upload";0!==e(t).length&&e(t).each(function(t,i){const p=".box-schema-item[data-key='"+s+"'] #"+e(i).attr("id");var a;e(i).click(function(s){s.preventDefault(),a?a.open():(a=wp.media.frames.file_frame=wp.media({multiple:!1}),a.on("select",function(){attachment=a.state().get("selection").first().toJSON(),e(p+"_meta").val(attachment.url),e(p+"_width").val(attachment.width),e(p+"_height").val(attachment.height)}),a.open())})})}function o(s){0!==e(".box-schema-item[data-key='"+s+"'] #wrap-faq .faq").length&&e(".box-schema-item[data-key='"+s+"'] #wrap-faq .faq").accordion({collapsible:!0,active:!1,heightStyle:"panel",header:"h3"})}function r(s){const t=".box-schema-item[data-key='"+s+"'] #wrap-faq";if(0!==e(t).length){var i=e(".box-schema-item[data-key='"+s+"'] #wrap-faq .faq:last").clone(),p=!1;e(".box-schema-item[data-key='"+s+"'] #wrap-faq .faq h3").click(function(e){p&&(e.stopImmediatePropagation(),e.preventDefault(),p=!1)});var a=e("#wrap-faq").attr("data-count");e(".box-schema-item[data-key='"+s+"'] #add-faq").click(function(t){t.preventDefault(),a++;var p=i.clone().find(":input").each(function(){var s=this.id,t=this.name,i=this.id.replace(/(\[seopress_pro_rich_snippets_faq\])\[.*?\]/,"$1["+a+"]");e(this).attr("name",t.replace(/(\[seopress_pro_rich_snippets_faq\])\[.*?\]/,"$1["+a+"]")),e(this).prev().attr("for",s.replace(/(\[seopress_pro_rich_snippets_faq\])\[.*?\]/,"$1["+a+"]")),e(this).prev().attr("id",t.replace(/(\[seopress_pro_rich_snippets_faq\])\[.*?\]/,"$1["+a+"]")),this.id=i}).end();return p.appendTo(".box-schema-item[data-key='"+s+"'] #wrap-faq"),o(s),!1}),e(".box-schema-item[data-key='"+s+"'] #wrap-faq").on("click",".remove-faq",function(){return e(this).fadeOut(300,function(){return e(this).parent().parent().parent().parent().remove(),!1}),!1})}}function n(){e('select[id$="[filter]"]').on("change",function(s){"taxonomy"===e(this).val()?(e(this).parent().find('select[id$="[taxo]"]').show(),e(this).parent().find('select[id$="[cpt]"]').hide()):(e(this).parent().find('select[id$="[taxo]"]').hide(),e(this).parent().find('select[id$="[cpt]"]').show())})}function c(){var s=e("p[data-group]").length;e(".seopress_pro_rich_snippets_rules_del").show(),1==s&&e(".seopress_pro_rich_snippets_rules_del:first").hide()}e("#seopress-schemas-tabs").length&&(e("#seopress-schemas-tabs .hidden").removeClass("hidden"),e("#seopress-schemas-tabs").tabs()),p(),e(".box-schema-item").each(function(e){t(e),i(e),r(e),o(e)}),e(".wrap-rich-snippets-item").toggle(),e(".js-handle-snippet-type").toggleClass("closed"),e(document).on("click",".js-handle-snippet-type",function(s){s.preventDefault(),e(this).parent().parent().find(".wrap-rich-snippets-item").toggle(),e(this).toggleClass("closed")}),e(".js-expand-all").on("click",function(s){s.preventDefault(),e(".wrap-rich-snippets-item").show(),e(".js-handle-snippet-type").addClass("closed")}),e(".js-close-all").on("click",function(s){s.preventDefault(),e(".wrap-rich-snippets-item").hide(),e(".js-handle-snippet-type").removeClass("closed")}),e("#js-add-schema-manual").on("click",function(t){t.preventDefault();const i=document.querySelector("#js-select-template-schema");if(0===i.length)return;const p=s(10);let a=e(i).clone().html();a=a.replace("[X]",p).replace("seopress_pro_rich_snippets_data[X]","seopress_pro_rich_snippets_data["+p+"]").replace("[X]",p),e("#js-box-list-schemas").prepend(a)}),e(document).on("click",".js-delete-schema-manual",function(s){s.preventDefault();const t=e(this).data("key");if(e(".box-schema-item[data-key='"+t+"']").remove(),0===e(".box-schema-item").length){const s=document.querySelector("#schema-template-empty");if(0===s.length)return;const t=e(".box-schema-item").length;let i=e(s).clone().html();i=i.replace("[X]",t).replace("seopress_pro_rich_snippets_data[X]","seopress_pro_rich_snippets_data["+t+"]").replace("[X]",t),e("#js-box-list-schemas").prepend(i)}}),e(document).on("change",".js-select_seopress_pro_rich_snippets_type",function(s){s.preventDefault();const n=e(this),c=e(this).val(),l=document.querySelector("#schema-template-"+c);if(0===l.length)return;const h=function(){return n.parent().parent().parent()};h().find(".wrap-rich-snippets-item:eq(0)").hide(),h().find(".wrap-rich-snippets-item:eq(1)").remove();let d=c,_=c;switch(d){case"localbusiness":d="local-business",_="local-business";break;case"articles":d="article";break;case"courses":d="course";break;case"recipes":d="recipe";break;case"videos":d="video";break;case"events":d="event";break;case"products":d="product";break;case"softwareapp":d="software",_="software-app";break;case"services":d="service";break;case"event":d="events",_="events"}let u=null;const m=h().find(".wrap-rich-snippets-item:eq(0)").hasClass("wrap-rich-snippets-"+_);if(m)h().find(".wrap-rich-snippets-item:eq(0)").show();else{const s="seopress_pro_rich_snippets_data[X]";let t=e(l).clone().html();u=h().data("key"),t=t.split(s).join("seopress_pro_rich_snippets_data["+u+"]"),h().append(t)}if(null!==u){switch(d){case"article":t(u);break;case"course":i(u);break;case"faq":r(u),o(u)}p(),a(u)}}),e(document).on("click","#seopress-tag-employment-1, #seopress-tag-employment-2, #seopress-tag-employment-3, #seopress-tag-employment-4, #seopress-tag-employment-5, #seopress-tag-employment-6, #seopress-tag-employment-7, #seopress-tag-employment-8",function(){var s=e(this).closest(".seopress_pro_rich_snippets_jobs_employment_type_p").find(".seopress_pro_rich_snippets_jobs_employment_type");0==s.val().length?s.val(jQuery(this).text()):(str=s.val(),str=str.replace(/,\s*$/,""),s.val(str+","+e(this).text()))});var l=e("p[data-group]").length,h=e("div[data-group]").length;n(),e("p[data-group]").each(function(s,t){e(t).data("group");c(t)}),e(".seopress_pro_rich_snippets_rules_del").css("cursor","pointer"),e(".wrap-rich-snippets-rules").on("click",".seopress_pro_rich_snippets_rules_and",function(s){var t=e(this).parent().clone().prop("outerHTML");t=t.replace(/\[\i[0-9]\]/g,"[i"+l+"]"),l++,e(this).parent().after(t),n(),c()}),e(".wrap-rich-snippets-rules").on("click",".seopress_pro_rich_snippets_rules_del",function(s){var t=e(this).data("group");1==e('p[data-group="'+t+'"]').length&&(e(this).parent().parent().prev(".separat_or").length?e(this).parent().parent().prev(".separat_or").remove():e(this).parent().parent().next(".separat_or").remove()),e(this).parent().remove(),""==e('div[data-group="'+t+'"]').html()&&e('div[data-group="'+t+'"]').remove(),c()}),e(document).on("click",".wrap-rich-snippets-rules #seopress_pro_rich_snippets_rules_add",function(s){var t=e(".wrap-rich-snippets-rules div[data-group]:first");t=t.clone(),e(t).find("p[data-group]:not(:first)").remove(),e(t).find(".seopress_pro_rich_snippets_rules_del").show(),t=t.prop("outerHTML"),t=t.replace(/\[\g[0-9]\]/g,"[g"+h+"]"),t=t.replace(/data-group="[0-9]"/g,'data-group="'+h+'"');var i=e(".separat_or:first").clone().prop("outerHTML");t+=i,h++,e(this).parent().prev().after(t),n(),c()}),e(':checkbox[name$="[closed]"]').on("click",function(s){e(this).parent().parent().find("li:not(:first)").toggle()}),e(':checked[name$="[closed]"]').each(function(s){e(this).parent().parent().find("li:not(:first)").toggle()});var d=e("#seopress-schemas-tabs .sp-schema-count").attr("data-count");e("#sp-automatic-tab span").html(d),e("#seopress-your-schema select.dyn").change(function(s){s.preventDefault();var t=e(this).val();"manual_global"==t?(e(this).next("input.manual_global").show(),e(this).closest("p").find("input.manual_global").show(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide()):"manual_img_global"==t?(e(this).next("input.manual_img_global").show(),e(this).closest("p").find("input.manual_img_library_global").hide(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide()):"manual_img_library_global"==t?(e(this).next("input.manual_img_global").hide(),e(this).closest("p").find("input.manual_img_library_global").show(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide()):"manual_date_global"==t?(e(this).next("input.manual_date_global").show(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide()):"manual_time_global"==t?(e(this).next("input.manual_time_global").show(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide()):"manual_rating_global"==t?(e(this).next("input.manual_rating_global").show(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide()):"custom_fields"==t?(e(this).closest("p").find("input").hide(),e(this).closest("p").find("input.manual_img_global").hide(),e(this).closest("p").find("input.manual_img_library_global").hide(),e(this).closest("p").find("input.manual_date_global").hide(),e(this).closest("p").find("input.manual_time_global").hide(),e(this).closest("p").find("input.manual_rating_global").hide(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.tax").hide(),e(this).closest("p").find("select.cf").show()):"custom_taxonomy"==t?(e(this).closest("p").find("input").hide(),e(this).closest("p").find("input.manual_img_global").hide(),e(this).closest("p").find("input.manual_img_library_global").hide(),e(this).closest("p").find("input.manual_date_global").hide(),e(this).closest("p").find("input.manual_time_global").hide(),e(this).closest("p").find("input.manual_rating_global").hide(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").show()):"manual_custom_global"==t?(e(this).closest("p").find("textarea.manual_custom_global").show(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide()):"manual_lb_global"==t?(e(this).closest("p").find("select.lb").show(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide(),e(this).closest("p").find("input").hide(),e(this).closest("p").find("textarea").hide()):(e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide(),e(this).closest("p").find("input").hide(),e(this).closest("p").find("textarea").hide())}).trigger("change");var _=".wrap-rich-snippets-articles",u=".wrap-rich-snippets-local-business",m=".wrap-rich-snippets-faq",f=".wrap-rich-snippets-courses",g=".wrap-rich-snippets-recipes",v=".wrap-rich-snippets-jobs",b=".wrap-rich-snippets-videos",y=".wrap-rich-snippets-events",w=".wrap-rich-snippets-products",k=".wrap-rich-snippets-services",x=".wrap-rich-snippets-software-app",q=".wrap-rich-snippets-review",j=".wrap-rich-snippets-custom",$=".wrap-rich-snippets-type .advice";e("#seopress-your-schema .box-left > p ~ div").hide(),"none"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?e($).show():"articles"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e($).hide(),e(_).show()):"localbusiness"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e($).hide(),e(u).show()):"faq"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e($).hide(),e(m).show()):"courses"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e($).hide(),e(f).show()):"recipes"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e($).hide(),e(g).show()):"jobs"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e($).hide(),e(v).show()):"videos"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e($).hide(),e(b).show()):"events"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e($).hide(),e(y).show()):"products"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e($).hide(),e(w).show()):"services"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e($).hide(),e(k).show()):"softwareapp"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e($).hide(),e(x).show()):"review"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e($).hide(),e(q).show()):"custom"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()&&(e($).hide(),e(j).show()),e("#seopress-your-schema #seopress_pro_rich_snippets_type").change(function(){var s=e("#seopress-your-schema #seopress_pro_rich_snippets_type").val();"none"==s&&(e($).show(),e(_+","+u+","+m+","+f+","+g+","+v+","+b+","+y+","+w+","+k+","+x+","+q+","+j).hide()),"articles"==s&&(e(_).show(),e($+","+u+","+m+","+f+","+g+","+v+","+b+","+y+","+w+","+k+","+x+","+q+","+j).hide()),"localbusiness"==s&&(e(u).show(),e($+","+_+","+m+","+f+","+g+","+v+","+b+","+y+","+w+","+k+","+x+","+q+","+j).hide()),"faq"==s&&(e(m).show(),e($+","+_+","+u+","+f+","+g+","+v+","+b+","+y+","+w+","+k+","+x+","+q+","+j).hide()),"courses"==s&&(e(f).show(),e($+","+_+","+u+","+m+","+g+","+v+","+b+","+y+","+w+","+k+","+x+","+q+","+j).hide()),"recipes"==s&&(e(g).show(),e($+","+_+","+u+","+m+","+f+","+v+","+b+","+y+","+w+","+k+","+x+","+q+","+j).hide()),"jobs"==s&&(e(v).show(),e($+","+_+","+u+","+m+","+f+","+g+","+b+","+y+","+w+","+k+","+x+","+q+","+j).hide()),"videos"==s&&(e(b).show(),e($+","+_+","+u+","+m+","+f+","+g+","+v+","+y+","+w+","+k+","+x+","+q+","+j).hide()),"events"==s&&(e(y).show(),e($+","+_+","+u+","+m+","+f+","+g+","+v+","+b+","+w+","+k+","+x+","+q+","+j).hide()),"products"==s&&(e(w).show(),e($+","+_+","+u+","+m+","+f+","+g+","+v+","+b+","+y+","+k+","+x+","+q+","+j).hide()),"services"==s&&(e(k).show(),e($+","+_+","+u+","+m+","+f+","+g+","+v+","+b+","+y+","+w+","+x+","+q+","+j).hide()),"softwareapp"==s&&(e(x).show(),e($+","+_+","+u+","+m+","+f+","+g+","+v+","+b+","+y+","+w+", "+k+", "+q+","+j).hide()),"review"==s&&(e(q).show(),e($+","+_+","+u+","+m+","+f+","+g+","+v+","+b+","+y+","+w+","+x+","+k+","+j).hide()),"custom"==s&&(e(j).show(),e($+","+_+","+u+","+m+","+f+","+g+","+v+","+b+","+y+","+w+","+x+","+k+","+q).hide())})});